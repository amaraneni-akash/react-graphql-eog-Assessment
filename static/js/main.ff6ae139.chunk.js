(this["webpackJsonpreact-graphql-eog"]=this["webpackJsonpreact-graphql-eog"]||[]).push([[0],{259:function(e,t,a){},274:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var n=a(240),r=a(0),c=a(32),i=a.n(c),s=(a(259),a(124)),o=a(90),u=a(212),l=a(107),j=a(130),b=a(237),d=a(451),m=a(452),p=a(33),f=a(214),v=a(242),O=a(47),h=a.n(O),g=a(110),x=a(61),w=a(241),y=a(161),M=a.n(y),D=Object(w.a)({name:"metrics",initialState:{allMetrics:[],multipleMeasurements:{},liveData:{}},reducers:{allMetricsDataRecevied:function(e,t){var a=t.payload.getMetrics;e.allMetrics=a},multipleMeasurementsDataRecevied:function(e,t){e.multipleMeasurements=t.payload},metricLiveDataRecevied:function(e,t){var a;e.liveData=null===(a=[t.payload])||void 0===a?void 0:a.map((function(e){var t;return t={},Object(x.a)(t,e.metric,e.value),Object(x.a)(t,"at",M()(parseInt(e.at)).format("LTS")),Object(x.a)(t,"unit",e.unit),t}))[0]},metricsApiErrorReceived:function(e,t){return e}}}),E=D.reducer,R=D.actions,A=h.a.mark(k),S=h.a.mark(C);function k(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)(j.b.error,"Error: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),A)}function C(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)(R.metricsApiErrorReceived.type,k);case 2:case"end":return e.stop()}}),S)}var N=h.a.mark(q);function q(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)(C);case 2:case"end":return e.stop()}}),N)}var L={metrics:E},F=Object(p.combineReducers)(L),T=(a(273),a(274),a(441)),P=a(439),B=a(440),I=a(437),$=a(13),z=Object(I.a)({grow:{flexGrow:1}}),G=function(){var e=z();return Object($.jsx)(P.a,{position:"static",style:{background:"#115E7C"},children:Object($.jsx)(B.a,{children:Object($.jsx)(T.a,{variant:"h6",color:"inherit",className:e.grow,children:"EOG React Visualization Assessment"})})})},J=Object(I.a)({wrapper:{height:"100vh"}}),K=function(e){var t=e.children,a=J();return Object($.jsx)("div",{className:a.wrapper,children:t})},W=a(31),H=a(456),Q=a(449),U=a(450),V=a(454),Z=a(243),X=a(239),Y=a(442),_=a(443),ee=Object(I.a)({root:{width:"100%"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),te=function(e){var t=ee(),a=Object(r.useState)({metric:"",unit:"",value:""}),n=Object(W.a)(a,2),c=n[0],i=n[1],s=[e.liveData].find((function(t){return t.metric===e.info.value})),o=void 0!==s?s:c;return Object(r.useEffect)((function(){void 0!==o&&i(o)}),[o]),Object($.jsx)(Y.a,{className:t.root,children:Object($.jsxs)(_.a,{children:[Object($.jsx)(T.a,{variant:"h6",component:"h4",align:"center",children:e.info.label}),Object($.jsx)(T.a,{className:t.pos,color:"textSecondary",align:"center",variant:"h5",component:"h1",children:"".concat(c.value," - ").concat(c.unit)})]})})},ae=a(165),ne=a(455),re=a(444),ce=a(236),ie=a(235),se=a(448),oe=a(109),ue=a(113),le=a(244),je=a(161),be=Object(I.a)({root:{justifyContent:"center",marginLeft:"20px",marginRight:"20px"},wrapper:{width:"100%",height:"70vh",minHeight:"300px"}}),de=[],me=[],pe={};function fe(e){var t=new Map;return e.forEach((function(e){var a=e.at;t.has(a)?t.set(a,Object(ae.a)(Object(ae.a)({},e),t.get(a))):t.set(a,e)})),Array.from(t.values())}var ve=function(e){var t=be(),a=e.data,n=e.liveData,c=e.selectedChartOptions;Object(r.useEffect)((function(){!function(e,t){for(var a=0;a<e.length;a++)for(var n=0;n<e[a].measurements.length;n++)de.push(Object(x.a)({at:je(e[a].measurements[n].at).format("LTS")},e[a].measurements[n].metric,e[a].measurements[n].value));de.filter((function(e){return pe.hasOwnProperty(e.at)?(pe[e.at].data.push(e),!1):(Array.isArray(e)||(e.data=[e.data]),pe[e.at]=e,!0)})),me=fe(de)}(a)}),[a]),Object(r.useEffect)((function(){me.push(n),me=fe(me)}),[n]);var i=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#654321","#a65628","#f781bf"];return 0===c.length?Object($.jsx)("p",{style:{textAlign:"center"},children:"Please select atleast one metric from the dropdown"}):Object($.jsx)(Y.a,{className:t.root,children:Object($.jsx)(_.a,{children:Object($.jsx)("div",{className:t.wrapper,children:Object($.jsx)(ne.a,{children:Object($.jsxs)(re.a,{data:me,margin:{top:10,right:50,left:10,bottom:0},children:[Object($.jsx)(ce.a,{type:"number",domain:["auto","auto"],tickCount:30,scale:"linear",padding:{top:10,bottom:10}}),Object($.jsx)(ie.a,{dataKey:"at",tickCount:30}),Object($.jsx)(se.a,{strokeDasharray:"3 3"}),Object($.jsx)(oe.a,{}),Object($.jsx)(ue.a,{}),null===c||void 0===c?void 0:c.map((function(e,t){return Object($.jsx)(le.a,{type:"monotone",dataKey:e.value,stroke:i[t],dot:!1,isAnimationActive:!1},e.value)}))]})})})})})},Oe=Object(X.a)(),he=(new Date).valueOf(),ge=Object(I.a)((function(e){return Object(V.a)({select:{padding:e.spacing(2)}})})),xe=function(e){var t=e.metrics;return{allMetrics:t.allMetrics,multipleMeasurements:t.multipleMeasurements,liveData:t.liveData}},we=function(){var e=ge(),t=Object(l.b)(),a=Object(r.useState)([]),n=Object(W.a)(a,2),c=n[0],i=n[1],s=Object(r.useState)([]),u=Object(W.a)(s,2),j=u[0],b=u[1],d=Object(l.c)(xe),m=d.allMetrics,p=d.multipleMeasurements,f=d.liveData,v=Object(o.b)({query:"{\n  getMetrics\n  }\n"}),O=Object(W.a)(v,1)[0],h=Object(o.b)({query:"\nquery($input: [MeasurementQuery]){\n  getMultipleMeasurements(input: $input) {\n    metric\n    measurements {\n     at\n     value\n     metric\n     unit\n    }\n  }\n}",variables:{input:m.map((function(e){return{metricName:e,after:he-18e5,before:he}}))}}),g=Object(W.a)(h,1)[0],x=Object(o.c)({query:"\n  subscription {\n    newMeasurement{\n      metric\n      at\n      value\n      unit\n    }\n  }\n"}),w=Object(W.a)(x,1)[0];return Object(r.useEffect)((function(){var e=[];m.forEach((function(t){e.push({value:t,label:t.replace(/([A-Z])/g," $1").toUpperCase()})})),b(e)}),[m]),Object(r.useEffect)((function(){var e=O.data,a=O.error;a?t(R.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(R.allMetricsDataRecevied(e))}),[t,O]),Object(r.useEffect)((function(){var e=g.data,a=g.error;a?t(R.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(R.multipleMeasurementsDataRecevied(null===e||void 0===e?void 0:e.getMultipleMeasurements))}),[t,g]),Object(r.useEffect)((function(){var e=w.data,a=w.error;a?t(R.metricsApiErrorReceived({error:null===a||void 0===a?void 0:a.message})):e&&t(R.metricLiveDataRecevied(null===e||void 0===e?void 0:e.newMeasurement))}),[t,w]),(null===g||void 0===g?void 0:g.fetching)?Object($.jsx)(H.a,{}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Q.a,{maxWidth:"lg",children:Object($.jsx)(U.a,{item:!0,xs:10,className:e.select,children:Object($.jsx)(Z.a,{onChange:function(e){i(null===e?[]:e)},closeMenuOnSelect:!0,components:Oe,isMulti:!0,options:j})})}),Object($.jsx)(U.a,{container:!0,spacing:1,className:e.select,children:null===c||void 0===c?void 0:c.map((function(e,t){return Object($.jsx)(U.a,{item:!0,xs:2,children:Object($.jsx)(te,{info:e,liveData:w.data.newMeasurement})},t)}))}),Object($.jsx)(U.a,{container:!0,spacing:1,className:e.select}),Object($.jsx)(ve,{data:p,liveData:f,selectedChartOptions:c})]})},ye=function(){var e=Object(f.composeWithDevTools)({}),t=Object(v.a)(),a=Object(p.applyMiddleware)(t),n=Object(p.createStore)(F,e(a));return t.run(q),n}(),Me=Object(b.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),De=function(){return Object($.jsxs)(d.a,{theme:Me,children:[Object($.jsx)(m.a,{}),Object($.jsx)(l.a,{store:ye,children:Object($.jsxs)(K,{children:[Object($.jsx)(G,{}),Object($.jsx)(we,{}),Object($.jsx)(j.a,{})]})})]})},Ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,457)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},Re=new u.SubscriptionClient("wss://react.eogresources.com/graphql",{reconnect:!0}),Ae=Object(s.a)({url:"https://react.eogresources.com/graphql",exchanges:[].concat(Object(n.a)(s.b),[Object(s.c)({forwardSubscription:function(e){return Re.request(e)}})])});i.a.render(Object($.jsx)(o.a,{value:Ae,children:Object($.jsx)(De,{})}),document.getElementById("root")),Ee()}},[[417,1,2]]]);
//# sourceMappingURL=main.ff6ae139.chunk.js.map